/*
ng-Choice Directive
===================

Dropdown with images and single menu item for angular

By Walter Staeblein (wstaeblein)

Distributed under the MIT Licence

*/
(function(){var e=angular.module("ngChoice",["ngAnimate"]);e.directive("choice",["$document",function(e){return{restrict:"E",scope:{model:"=ngModel",list:"="},template:'<div class="chc_main">'+'<div ng-class="{ chc_box: !isMenu, chc_menu: isMenu }" ng-click="openList($event)">'+'<table cellpadding="5" cellspacing="0" class="chc_header">'+'<tr><td ng-if="useimg" class="chc_img"><img ng-src="{{ chosenImage() }}" /></td>'+'<td class="chc_text">'+'<table class="chc_fixed"><tr><td ng-class="{ chc_placeholder: isPlaceHolder }">{{ chosenText() }}</td></tr></table>'+"</td>"+'<td class="chc_arrow"><span></span></td></tr></table>'+"</div>"+'<ul class="chc_list chcList-animation" ng-show="showList" ng-class="{ chc_menu: isMenu }">'+'<li ng-repeat="l in list | orderBy: order" ng-click="select(l);">'+'<div class="chc_img" ng-if="useimg"><img ng-src="{{ l.img }}" /><span></span></div>'+'<div class="chc_text">{{ l.text }}</div>'+"</li>"+"</ul>"+"</div>",compile:function(t,n){return function(t,n,r){var i=false;t.showList=false;t.isMenu=r.menu&&r.menu!=""&&r.menu!="false";if(t.isMenu){t.useimg=r.titleimg!=undefined&&r.titleimg!=""}else{t.useimg=t.list&&t.list[0].img!=undefined}if(!isNaN(r.sortdir)&&(r.sortdir==1||r.sortdir==-1)){t.order=(r.sortdir==-1?"-":"")+"text"}t.isPlaceHolder=false;t.title=r.title||" ";var s=$(n).find(".chc_main");if(r.width){s.find("> div").width(r.width)}else{s.find(".chc_fixed").width("auto")}e.on("click",function(e){t.$apply(function(){if(!i){t.showList=false}i=false})});t.chosenImage=function(){return t.isMenu?r.titleimg:t.model?t.model.img:""};t.chosenText=function(){t.isPlaceHolder=false;if(t.isMenu){return t.title||" "}else{if(t.model){return t.model.text||" "}else{t.isPlaceHolder=true;return t.title||" "}}};t.select=function(e){t.model=e};t.openList=function(e){i=true;$(n).find("ul.chc_list").css("top",s.outerHeight(true));t.showList=!t.showList}}}}}])})()